# 恢复出厂固件方法

> 该方法可用于升级整机固件，亦可用于救砖。

## 硬件连接

准备 ART-Badge 和 一根 Micro USB 线USB 线连接电路板与电脑。

![image-20201216140648412](figures/image-20201216140648412.png)

## 设置 MPTool 工具

> MPTool 工具设置一次即可，后面无论是电脑重启或重新打开该工具均可保持上一次的设置。

双击 MPTool.exe 打开该工具，选择芯片类型为 `RTL8762D`。

![image-20201216180256232](figures/image-20201216180256232.png)

![image-20201216180417489](figures/image-20201216180417489.png)

在菜单栏中，选择类型为量产即可。

![image-20201216180152452](figures/image-20201216180152452.png)

在 MP_Setting 中导入待下载的 xxx.bin 文件。进入 MP_Setting 页面，该界面呈灰色，因为需要先登录。

![image-20201216180852656](figures/image-20201216180852656.png)

先点击右下角的 `解锁` 按钮，设置密码如 “123”，登录即可。

![image-20201216180709530](figures/image-20201216180709530.png)

登陆之后，该页面数据框变为可编辑：

1. 项目名称，随意填写。
2. 包文件：点击图中的 `...`，将 xxx.bin 文件加进来。
3. 设置蓝牙起始地址、蓝牙结束地址，建议蓝牙起始地址为：4C ED FB XX XX XX，其中 XX XX XX 可以自定义。（都是16进制）。
4. 点击锁定，界面变为不可编辑状态，MPTool 设置完成。

![image-20201216181350907](figures/image-20201216181350907.png)

## 开始下载固件

MPTool 工具设置完成后，进入 MP_Download 界面，如下图所示：

![image-20201216182201305](figures/image-20201216182201305.png)

操作已连接到电脑上的 ART-Badge，已经连接在电脑上的每个电路板都需要先进行这样的操作：按住内键（`LOG_UART_TX` 键）不放，此时按一下外键（`RESET` 键），松开外键，然后再松开内键。

![image-20201216183044355](figures/image-20201216183044355.png)

所有连在电脑上的线路板都操作完成了之后，点击 `下载` 即可：可以看到电路板的下载进度，进度条满，显示绿色打钩后，该组 ART-Badge 固件下载结束。

![image-20201216184101780](figures/image-20201216184101780.png)

## 注意事项：

1、一组设备下载全部结束后，才可以插拔设备。

2、如果出现 MPTool 工具下载过程中无响应，可能是数据线有问题，更换一条usb线。

![image-20201216142657727](figures/image-20201216142657727.png)